(function(){function n(n,o,e=null){"warn"===n?console.warn(o,e):"error"===n?console.error(o,e):console.log(o,e)}function o(o=!1){try{const{hostname:e}=new URL(window.location.href),t=e.split(".");return o?e:t.length>2?`.${t.slice(-2).join(".")}`:e}catch(o){return n("error","Erro ao extrair domínio:",o),null}}function e(){const n=new URLSearchParams(window.location.search),o={};return i.forEach(e=>{n.has(e)&&(o[e]=n.get(e))}),o}function t(n,e=24){const t=new Date(Date.now()+60*e*60*1e3).toUTCString(),r=o();for(const o in n)n.hasOwnProperty(o)&&(document.cookie=`${o}=${n[o]};expires=${t};path=/;domain=${r}`)}function r(){const n={},o=document.cookie.split("; ").filter(n=>{const[o]=n.split("=");return i.includes(o)});return o.forEach(o=>{const[e,t]=o.split("=");n[e]=t}),n}function c(){const o=r();if(Object.keys(o).length>0){const e=document.querySelectorAll("a[href]");e.forEach(e=>{try{const t=new URL(e.href,window.location.origin);if(t.origin===window.location.origin){for(const n in o)o.hasOwnProperty(n)&&t.searchParams.set(n,o[n]);e.href=t.toString()}}catch(o){n("error",`Erro ao processar link: ${e.href}`,o)}})}}const i=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];"URL"in window||(n("warn","API URL não suportada. Adicionando polyfill."),function(){function n(n,o){const e=document.implementation.createHTMLDocument(""),t=e.createElement("base"),r=e.createElement("a");return t.href=o||window.location.href,e.head.appendChild(t),r.href=n,e.body.appendChild(r),r}window.URL=n}());const a=new MutationObserver(()=>{c()}),s={childList:!0,subtree:!0};a.observe(document.body,s),document.addEventListener("DOMContentLoaded",()=>{const n=e();Object.keys(n).length>0&&t(n),c()})})();